import{R as w}from"./iframe-PL5-iZbX.js";const P=t=>{let a;const e=new Set,n=(c,p)=>{const S=typeof c=="function"?c(a):c;if(!Object.is(S,a)){const m=a;a=p??(typeof S!="object"||S===null)?S:Object.assign({},a,S),e.forEach(g=>g(a,m))}},s=()=>a,i={setState:n,getState:s,getInitialState:()=>f,subscribe:c=>(e.add(c),()=>e.delete(c))},f=a=t(n,s,i);return i},x=(t=>t?P(t):P),_=t=>t;function C(t,a=_){const e=w.useSyncExternalStore(t.subscribe,w.useCallback(()=>a(t.getState()),[t,a]),w.useCallback(()=>a(t.getInitialState()),[t,a]));return w.useDebugValue(e),e}const E=t=>{const a=x(t),e=n=>C(a,n);return Object.assign(e,a),e},H=(t=>t?E(t):E);function O(t,a){let e;try{e=t()}catch{return}return{getItem:s=>{var r;const u=f=>f===null?null:JSON.parse(f,void 0),i=(r=e.getItem(s))!=null?r:null;return i instanceof Promise?i.then(u):u(i)},setItem:(s,r)=>e.setItem(s,JSON.stringify(r,void 0)),removeItem:s=>e.removeItem(s)}}const b=t=>a=>{try{const e=t(a);return e instanceof Promise?e:{then(n){return b(n)(e)},catch(n){return this}}}catch(e){return{then(n){return this},catch(n){return b(n)(e)}}}},R=(t,a)=>(e,n,s)=>{let r={storage:O(()=>localStorage),partialize:o=>o,version:0,merge:(o,v)=>({...v,...o}),...a},u=!1;const i=new Set,f=new Set;let c=r.storage;if(!c)return t((...o)=>{console.warn(`[zustand persist middleware] Unable to update item '${r.name}', the given storage is currently unavailable.`),e(...o)},n,s);const p=()=>{const o=r.partialize({...n()});return c.setItem(r.name,{state:o,version:r.version})},S=s.setState;s.setState=(o,v)=>(S(o,v),p());const m=t((...o)=>(e(...o),p()),n,s);s.getInitialState=()=>m;let g;const I=()=>{var o,v;if(!c)return;u=!1,i.forEach(l=>{var d;return l((d=n())!=null?d:m)});const h=((v=r.onRehydrateStorage)==null?void 0:v.call(r,(o=n())!=null?o:m))||void 0;return b(c.getItem.bind(c))(r.name).then(l=>{if(l)if(typeof l.version=="number"&&l.version!==r.version){if(r.migrate){const d=r.migrate(l.state,l.version);return d instanceof Promise?d.then(k=>[!0,k]):[!0,d]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,l.state];return[!1,void 0]}).then(l=>{var d;const[k,M]=l;if(g=r.merge(M,(d=n())!=null?d:m),e(g,!0),k)return p()}).then(()=>{h?.(g,void 0),g=n(),u=!0,f.forEach(l=>l(g))}).catch(l=>{h?.(void 0,l)})};return s.persist={setOptions:o=>{r={...r,...o},o.storage&&(c=o.storage)},clearStorage:()=>{c?.removeItem(r.name)},getOptions:()=>r,rehydrate:()=>I(),hasHydrated:()=>u,onHydrate:o=>(i.add(o),()=>{i.delete(o)}),onFinishHydration:o=>(f.add(o),()=>{f.delete(o)})},r.skipHydration||I(),g||m},j=R,y={intensity:100,windStrength:1,snowflakeSize:{min:2,max:6},colors:["rgba(255, 255, 255, opacity)","rgba(240, 248, 255, opacity)"],shapes:["circle","star","cross"],accumulation:!0,fadeDelay:5e3,fadeDuration:2e3,maxStuckSnowflakes:50,interactive:!0,performance:"medium"},D=H()(j((t,a)=>({config:y,isEnabled:!0,stuckSnowflakes:new Map,presets:[{name:"Light Snow",config:{intensity:50,windStrength:.5}},{name:"Blizzard",config:{intensity:300,windStrength:2,snowflakeSize:{min:3,max:8}}},{name:"Magic",config:{colors:["rgba(255, 255, 255, opacity)","rgba(200, 220, 255, opacity)","rgba(255, 200, 255, opacity)"],shapes:["star","cross"]}}],toggle:()=>t(e=>({isEnabled:!e.isEnabled})),updateConfig:e=>t(n=>({config:{...n.config,...e},activePreset:void 0})),resetConfig:()=>t({config:y,activePreset:void 0}),addStuckSnowflake:(e,n)=>t(s=>{const r=s.stuckSnowflakes.get(e)||[],u=a().config;r.length>=u.maxStuckSnowflakes&&r.shift(),r.push(n);const i=new Map(s.stuckSnowflakes);return i.set(e,r),{stuckSnowflakes:i}}),removeStuckSnowflake:(e,n)=>t(s=>{const r=s.stuckSnowflakes.get(e);if(!r)return s;const u=r.filter(f=>f.id!==n),i=new Map(s.stuckSnowflakes);return u.length===0?i.delete(e):i.set(e,u),{stuckSnowflakes:i}}),clearElement:e=>t(n=>{const s=new Map(n.stuckSnowflakes);return s.delete(e),{stuckSnowflakes:s}}),clearAll:()=>t({stuckSnowflakes:new Map}),addPreset:e=>t(n=>({presets:[...n.presets,e]})),removePreset:e=>t(n=>({presets:n.presets.filter(s=>s.name!==e)})),applyPreset:e=>t(n=>{const s=n.presets.find(r=>r.name===e);return s?{config:{...y,...s.config},activePreset:e}:n})}),{name:"snowfall-config",partialize:t=>({config:t.config,isEnabled:t.isEnabled,presets:t.presets,activePreset:t.activePreset})}));export{D as u};
